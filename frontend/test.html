<html lang="en">
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">
        <!-- <link rel="icon" href="../../favicon.ico"> -->

        <title>Gesture Control System | Basic</title>

        <!-- fonts System -->
        <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
        <!-- <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'> -->

        <!-- Bootstrap core CSS -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="assets/css/dashboard.css" rel="stylesheet">

        <script src="assets/js/jquery-1.11.3.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/d3.min.js"></script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Gesture Control System</a>
                </div>

                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">Dashboard</a></li>
                        <li><a href="#">Settings</a></li>
                        <li><a href="#">Profile</a></li>
                        <li><a href="#">Help</a></li>
                    </ul>
                    <form class="navbar-form navbar-right">
                        <input type="text" class="form-control" placeholder="Search...">
                    </form>
                </div>
            </div>
        </nav>

   

        <div class="container-fluid">
            <div class="row">

                <div class="col-sm-3 col-md-2 sidebar">
                    <ul class="nav nav-sidebar">
                    <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
                    <li><a href="#">Reports</a></li>
                    <li><a href="#">Analytics</a></li>
                    <li><a href="#">Export</a></li>
                    </ul>
                </div>

                

                <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
                    <h1 class="page-header">Gesture Control System | Basic</h1>

                    <div class="row">

                        <div class="col-md-12">
                            <button class="thumbnail">
                                <div class="action-tiles">
                                    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
                                </div>
                                <h3>Coordinates</h3>
                                <p class="result">- Coordinate Values -</p>
                                <div class="btn btn-default btn-lg" id="startMonBtn" onclick="initiateMon()">
                                    Start Monitoring
                                </div>

                                <div class="btn btn-default btn-lg" data-toggle="modal" data-target="#monModal">
                                    Monitoring Settings
                                </div>
                               
                                <div><h4>Monitoring Interval Settings: <span class="monIntervalSet">30</span></h4></div>
                            </button>

                        </div>

                    </div>

                    

                    <div class="row">
                        


                        <div class="col-md-12">
                            <div class="col-md-4">
                                <div id="X-Coordinate">
                                <h2> X Coordinate Value </h2>
                                <h5 id="xval">- X-Coordinate Reading -</h5>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div id="Y-Coordinate">
                                <h2> Y Coordinate Value </h2>
                                <h5 id="yval">- Y-Coordinate Reading -</h5>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div id="Z-Coordinate">
                                <h2> Z Coordinate Value </h2>
                                <h5 id="zval">- Z-Coordinate Reading -</h5>
                                </div>
                            </div>

                        </div>
                    </div>


                    <!-- Add Tasks Modal -->
                    <div class="modal fade" id="monModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span>Monitoring Rate</h4>
                                </div>

                                <!-- Form For Adding a Task -->
                                <form class="form-horizontal">
                                    <div class="modal-body">

                                            <div class="form-group">
                                                <label for="inputPassword3" class="col-sm-2 control-label">Monitoring Rate (ms)</label>
                                            
                                                    <div class="input-group">
                                                        <input id="userMonitoringVal" required type="number" min=1 max=8000 value="250" class="form-control">
                                                    </div>
                                                
                                            </div>
                                    </div>

                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                    </div>
                                </form>
                                
                            </div>
                        </div>
                    </div>

                    <style>

                        svg {
                            font: 10px sans-serif;
                        }

                        .line {
                            fill: none;
                            stroke: #000;
                            stroke-width: 1.5px;
                        }

                        .axis path,
                        .axis line {
                            fill: none;
                            stroke: #000;
                            shape-rendering: crispEdges;
                        }

                    </style>
                    
                    <script>

                        
                            var n = 100,
                                random = d3.random.normal(0, 60),
                                data = d3.range(n).map(random),
                                data2 = d3.range(n).map(random),
                                data3 = d3.range(n).map(random);

                            var margin = {top: 20, right: 20, bottom: 20, left: 40},
                                width = 300 - margin.left - margin.right,
                                height = 300 - margin.top - margin.bottom;

                            var x = d3.scale.linear()
                                .domain([0, n - 1])
                                .range([0, width]);

                            var y = d3.scale.linear()
                                .domain([-300, 300]) 
                                .range([height, 0]);

                            var line = d3.svg.line()
                                .x(function(d, i) { return x(i); })
                                .y(function(d, i) { return y(d); });

                            var svg = d3.select("#X-Coordinate").append("svg")
                                .attr("width", width + margin.left + margin.right)
                                .attr("height", height + margin.top + margin.bottom)
                                 .append("g")
                                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                            var svg2 =d3.select("#Y-Coordinate").append("svg")
                                .attr("width", width + margin.left + margin.right)
                                .attr("height", height + margin.top + margin.bottom)
                                 .append("g")
                                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                            var svg3 =d3.select("#Z-Coordinate").append("svg")
                                .attr("width", width + margin.left + margin.right)
                                .attr("height", height + margin.top + margin.bottom)
                                .append("g")
                                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                            svg.append("defs").append("clipPath")
                                .attr("id", "clip")
                                .append("rect")
                                .attr("width", width)
                                .attr("height", height);

                            svg.append("g")
                                .attr("class", "x axis")
                                .attr("transform", "translate(0," + y(0) + ")")
                                .call(d3.svg.axis().scale(x).orient("bottom"));

                            svg.append("g")
                                .attr("class", "y axis")
                                .call(d3.svg.axis().scale(y).orient("left"));

                            var path = svg.append("g")
                                .attr("clip-path", "url(#clip)")
                                .append("path")
                                .datum(data)
                                .attr("class", "line")
                                .attr("d", line);

                            svg2.append("defs").append("clipPath")
                                .attr("id", "clip2")
                              .append("rect")
                                .attr("width", width)
                                .attr("height", height);

                            svg2.append("g")
                                .attr("class", "x axis")
                                .attr("transform", "translate(0," + y(0) + ")")
                                .call(d3.svg.axis().scale(x).orient("bottom"));

                            svg2.append("g")
                                .attr("class", "y axis")
                                .call(d3.svg.axis().scale(y).orient("left"));

                            var path2 = svg2.append("g")
                                .attr("clip-path", "url(#clip3)")
                                .append("path")
                                .datum(data2)
                                .attr("class", "line")
                                .attr("d", line);

                            svg3.append("defs").append("clipPath")
                                .attr("id", "clip3")
                                .append("rect")
                                .attr("width", width)
                                .attr("height", height);

                            svg3.append("g")
                                .attr("class", "x axis")
                                .attr("transform", "translate(0," + y(0) + ")")
                                .call(d3.svg.axis().scale(x).orient("bottom"));

                            svg3.append("g")
                                .attr("class", "y axis")
                                .call(d3.svg.axis().scale(y).orient("left"));

                            var path3 = svg3.append("g")
                                .attr("clip-path", "url(#clip3)")
                                .append("path")
                                .datum(data3)
                                .attr("class", "line")
                                .attr("d", line);

                            var value1 = 0;
                            var value2 = 0;
                            var value3 = 0;

                            var monitoringIsAlive = false;

                        function initiateMon(){
                        
                            // Change the text to indicate choice to stop monitoring
                            if(!monitoringIsAlive){
                                $("#startMonBtn").html("Stop Monitoring");
                                monitoringIsAlive = true;
                                startMonitoring();
                            }

                            else {
                                $("#startMonBtn").html("Start Monitoring");
                                monitoringIsAlive = false;
                                startMonitoring();
                            }

                        }

                        function stopMonitoring(){
                            // Dirty way to make a stop monitoring illusion
                            setTimeout(worker,6000);
                        }

                        function startMonitoring(){
                            var userIntVal = $("#userMonitoringVal").value;
                            worker(userIntVal);
                            
                        }


                        // AJAX Loop to fetch data from buffer
                        function worker(timeInt) {
                            var timeVar = timeInt;
                            $.ajax({
                                url: 'ajax.php', 
                                success: function(data) {
                                    // value1 = JSON.parse(data)[0][0];
                                    // value2 = JSON.parse(data)[0][1];
                                    // value3 = JSON.parse(data)[0][2];
                                    value1 = random();
                                    value2 = random();
                                    value3 = random();
                                    // value1 = data;
                                },
                                complete: function() {
                                    // Schedule the next request when the current one's complete
                                    $("#xval").html(value1);
                                    $("#yval").html(value2);
                                    $("#zval").html(value3);

                                    // Rescursive call to worker thread
                                    setTimeout(worker,10);
                                    tick(value1,value2,value3);
                                 }
                            });
                        };

                        function tick(value1, value2, value3) {

                            // X Coordinate Reading
                            // push a new data point onto the back
                            data.push(value1);

                            // redraw the line, and slide it to the left
                            path
                            .attr("d", line)
                            .attr("transform", null)
                            .transition()
                            .duration(500)
                            .ease("linear")
                            .attr("transform", "translate(" + x(-1) + ",0)")
                            .each("end", tick);

                            // pop the old data point off the front
                            data.shift();

                            data2.push(value2);

                            // redraw the line, and slide it to the left
                            path2
                            .attr("d", line)
                            .attr("transform", null)
                            .transition()
                            .duration(500)
                            .ease("linear")
                            .attr("transform", "translate(" + x(-1) + ",0)")
                            .each("end", tick);

                            // pop the old data point off the front
                            data2.shift();

                            data3.push(value3);

                            // redraw the line, and slide it to the left
                            path3
                            .attr("d", line)
                            .attr("transform", null)
                            .transition()
                            .duration(500)
                            .ease("linear")
                            .attr("transform", "translate(" + x(-1) + ",0)")
                            .each("end", tick);

                            // pop the old data point off the front
                            data3.shift();

                        }

                    </script>

                 
                    </div>
                </div>
            </div>
        </div>


    </body>
</html>